# Web Agent - Shared Types

## Overview

This package serves as the central repository for TypeScript type definitions (interfaces, enums, etc.) used across all packages within the `@web-agent` ecosystem. Its primary purpose is to ensure data consistency, type safety, and easier interoperability between the frontend, backend, plugins, and any other related components.

By centralizing these types, we avoid duplication and reduce the risk of inconsistencies that can arise when each package defines its own version of shared data structures.

## Key Types

This package defines and exports several core data structures, including but not limited to:

*   **`DomNode`**: Represents a node in the captured DOM tree. It includes an `element` (of type `WebElementInfo`) containing detailed attributes, content, and geometric data of the HTML element, and a `children` array for its child nodes. This structure is designed to be compatible with the output of `midscene_element_inspector` and the input expected by `@midscene/core`.
*   **`WebElementInfo`**: Contains detailed information about a single HTML element, such as its `id`, `attributes`, `content`, `rect` (bounding box), `nodeType`, and `htmlTagName`.
*   **`DomData`**: A container object that bundles the `rootNode` (the entire DOM tree), the page `url`, and `windowSize`. It can also optionally include a `treeString` representation.
*   **`ActionType`**: An enum defining the types of actions that can be performed on a web page (e.g., `CLICK`, `TYPE`, `NAVIGATE`, `SCROLL`).
*   **`ActionStep`**: An interface describing a single step within an action plan, including its `type`, `description`, target `elementId`, `value`, and other `parameters`.
*   **`ActionPlan`**: Represents a complete plan to achieve a goal, containing a `goal` string and an array of `ActionStep`s.
*   **`SpecialControlRecommendation`**: Defines the structure for recommendations generated by plugins like `@web-agent/special-controls-plugin`. It includes the `detectedElementId`, `originalInstructionFragment`, `confidence`, and an array of `RecommendedActionStep`s.
*   **`RecommendedActionStep`**: Describes a specific action suggested by a plugin for interacting with a special control.

## Usage

Other packages within the `@web-agent` system (e.g., `@web-agent/frontend`, `@web-agent/backend`, `@web-agent/plugins/special-controls`) should list `@web-agent/shared-types` as a dependency in their `package.json` files:

```json
"dependencies": {
  "@web-agent/shared-types": "workspace:*"
}
```

They can then import the necessary types directly:

```typescript
import { DomNode, ActionPlan, ActionType } from '@web-agent/shared-types';
```

This ensures that all components are working with the same understanding of the data structures they exchange.
